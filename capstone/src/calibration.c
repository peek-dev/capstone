#include "config.h"
#include "calibration.h"
#include "assert.h"

// Lower bounds for hall effect sensor reading bins.
const uint16_t bins[8][8][13] =
{{{   0,  636, 1284, 1517, 1693, 1845, 1981, 2124, 2262, 2398, 2586, 2858, 3540},
  {   0,  659, 1318, 1534, 1702, 1849, 1982, 2119, 2254, 2376, 2576, 2824, 3522},
  {   0,  703, 1344, 1540, 1706, 1852, 1982, 2119, 2250, 2377, 2565, 2821, 3514},
  {   0,  671, 1316, 1508, 1684, 1834, 1970, 2110, 2244, 2374, 2572, 2846, 3537},
  {   0,  956, 1379, 1565, 1724, 1846, 1972, 2101, 2228, 2328, 2482, 2674, 3178},
  {   0,  871, 1386, 1585, 1748, 1874, 2004, 2136, 2266, 2374, 2532, 2756, 3328},
  {   0,  619, 1245, 1488, 1685, 1842, 1990, 2140, 2288, 2424, 2630, 2914, 3599},
  {   0,  567, 1135, 1413, 1643, 1818, 1978, 2136, 2302, 2449, 2684, 3006, 3636},},

 {{   0,  540, 1107, 1395, 1630, 1809, 1972, 2136, 2305, 2464, 2709, 3049, 3674},
  {   0,  495, 1056, 1354, 1606, 1793, 1962, 2130, 2304, 2472, 2718, 3088, 3694},
  {   0,  541, 1127, 1412, 1640, 1826, 1990, 2150, 2318, 2486, 2730, 3070, 3674},
  {   0,  593, 1221, 1471, 1669, 1836, 1982, 2130, 2280, 2436, 2658, 2966, 3619},
  {   0,  556, 1120, 1406, 1638, 1812, 1972, 2133, 2296, 2454, 2686, 3006, 3666},
  {   0,  557, 1168, 1429, 1656, 1822, 1976, 2134, 2295, 2444, 2667, 2962, 3642},
  {   0,  541, 1120, 1404, 1630, 1802, 1957, 2116, 2280, 2430, 2656, 2962, 3634},
  {   0,  590, 1218, 1458, 1658, 1814, 1961, 2110, 2262, 2401, 2604, 2894, 3581},},

 {{   0,  599, 1229, 1470, 1676, 1842, 1990, 2142, 2294, 2438, 2642, 2937, 3602},
  {   0,  535, 1113, 1401, 1628, 1804, 1968, 2131, 2294, 2456, 2692, 3014, 3646},
  {   0,  542, 1143, 1428, 1654, 1830, 1990, 2154, 2317, 2474, 2704, 3029, 3670},
  {   0,  546, 1133, 1404, 1623, 1796, 1952, 2108, 2272, 2426, 2650, 2965, 3618},
  {   0,  547, 1151, 1419, 1640, 1812, 1970, 2128, 2289, 2437, 2670, 2980, 3636},
  {   0,  537, 1132, 1416, 1632, 1802, 1962, 2120, 2282, 2436, 2658, 2979, 3634},
  {   0,  598, 1225, 1478, 1673, 1831, 1978, 2126, 2274, 2414, 2618, 2884, 3576},
  {   0,  591, 1222, 1476, 1680, 1840, 1988, 2140, 2294, 2434, 2647, 2928, 3601},},

 {{   0,  609, 1221, 1474, 1674, 1834, 1984, 2132, 2286, 2409, 2638, 2923, 3593},
  {   0,  574, 1166, 1431, 1646, 1812, 1964, 2118, 2270, 2422, 2646, 2950, 3606},
  {   0,  641, 1270, 1508, 1693, 1841, 1982, 2128, 2276, 2407, 2604, 2867, 3554},
  {   0,  829, 1411, 1593, 1738, 1863, 1982, 2106, 2232, 2338, 2490, 2694, 3330},
  {   0,  931, 1439, 1617, 1757, 1870, 1991, 2114, 2234, 2342, 2488, 2682, 3254},
  {   0,  907, 1456, 1617, 1757, 1872, 1992, 2116, 2233, 2338, 2482, 2680, 3298},
  {   0,  713, 1384, 1578, 1744, 1868, 1996, 2129, 2260, 2380, 2548, 2766, 3476},
  {   0,  648, 1311, 1522, 1695, 1830, 1966, 2100, 2236, 2366, 2544, 2774, 3511},},

 {{   0,  546, 1236, 1513, 1692, 1843, 1989, 2131, 2263, 2397, 2599, 2931, 3625},
  {   0,  716, 1342, 1548, 1720, 1873, 1991, 2122, 2252, 2361, 2528, 2813, 3479},
  {   0,  590, 1270, 1522, 1705, 1865, 1990, 2125, 2260, 2393, 2543, 2815, 3456},
  {   0,  406, 1112, 1426, 1663, 1837, 1990, 2143, 2298, 2446, 2661, 2962, 3607},
  {   0,  530, 1141, 1464, 1658, 1829, 1984, 2140, 2273, 2436, 2639, 2948, 3603},
  {   0,  582, 1256, 1488, 1697, 1847, 1973, 2116, 2230, 2392, 2591, 2855, 3436},
  {   0,  741, 1354, 1565, 1741, 1869, 2005, 2134, 2262, 2380, 2560, 2755, 3385},
  {   0,  797, 1371, 1585, 1746, 1869, 1993, 2129, 2248, 2365, 2532, 2738, 3336},},

 {{   0,  854, 1421, 1592, 1732, 1852, 1974, 2104, 2230, 2346, 2502, 2700, 3270},
  {   0,  942, 1434, 1614, 1758, 1877, 1996, 2124, 2243, 2354, 2502, 2700, 3256},
  {   0,  591, 1272, 1511, 1704, 1858, 2000, 2140, 2277, 2426, 2618, 2870, 3592},
  {   0,  563, 1202, 1470, 1675, 1831, 1982, 2126, 2268, 2422, 2633, 2906, 3634},
  {   0,  620, 1258, 1509, 1700, 1841, 1986, 2120, 2265, 2406, 2599, 2865, 3586},
  {   0,  616, 1270, 1494, 1682, 1840, 1969, 2108, 2246, 2380, 2571, 2826, 3546},
  {   0,  532, 1200, 1450, 1662, 1824, 1980, 2134, 2285, 2442, 2658, 2982, 3664},
  {   0,  584, 1229, 1475, 1676, 1834, 1983, 2136, 2287, 2433, 2638, 2920, 3615},},

 {{   0,  589, 1261, 1491, 1672, 1823, 1966, 2110, 2254, 2392, 2576, 2821, 3553},
  {   0,  562, 1184, 1451, 1656, 1824, 1978, 2132, 2285, 2436, 2650, 2939, 3613},
  {   0,  595, 1225, 1488, 1682, 1836, 1982, 2127, 2274, 2420, 2616, 2880, 3582},
  {   0,  594, 1236, 1488, 1683, 1842, 1988, 2131, 2274, 2414, 2613, 2873, 3594},
  {   0,  598, 1256, 1508, 1686, 1842, 1984, 2130, 2274, 2412, 2608, 2874, 3577},
  {   0,  680, 1316, 1536, 1706, 1842, 1977, 2116, 2252, 2374, 2544, 2773, 3506},
  {   0,  559, 1164, 1440, 1648, 1816, 1970, 2122, 2278, 2431, 2650, 2958, 3628},
  {   0,  522, 1138, 1411, 1630, 1800, 1958, 2113, 2270, 2430, 2648, 2978, 3653},},

 {{   0,  576, 1232, 1480, 1674, 1832, 1979, 2128, 2280, 2426, 2630, 2906, 3617},
  {   0,  585, 1228, 1475, 1674, 1832, 1978, 2125, 2274, 2424, 2628, 2896, 3606},
  {   0,  584, 1246, 1498, 1682, 1834, 1976, 2114, 2253, 2401, 2606, 2855, 3586},
  {   0,  526, 1153, 1430, 1649, 1814, 1968, 2119, 2276, 2439, 2672, 2960, 3652},
  {   0,  721, 1301, 1528, 1700, 1838, 1974, 2116, 2257, 2388, 2562, 2810, 3534},
  {   0,  574, 1213, 1472, 1669, 1822, 1966, 2112, 2262, 2414, 2628, 2906, 3606},
  {   0,  491, 1109, 1403, 1618, 1792, 1956, 2113, 2277, 2438, 2664, 2977, 3681},
  {   0,  541, 1158, 1427, 1638, 1804, 1957, 2114, 2270, 2416, 2638, 2944, 3640}}};

const uint16_t * GetBins(uint8_t row, uint8_t col) {
    assert(row < 8 && col < 8);
    return bins[row][col];
  }